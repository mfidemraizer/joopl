<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>jOOPL | Class test</title>
    <link rel="stylesheet" href="/resources/qunit.css">
</head>
<body>
    <div id="qunit"></div>
    <div id="qunit-fixture"></div>

    <link rel="stylesheet" type="text/css" href="qunit.css" />
    <script src="qunit.js" type="text/javascript"></script>
    <script src="joopl.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        (function (undefined) {
            "use strict";

            test("Define an enumeration. Enumeration values must be accessible after its definition", function () {
                var State = $enumdef({
                    open: 0,
                    closed: 1
                });

                ok(State.open == 0, "Expected enum value is 0");
                ok(State.closed == 1, "Expected enum value is 1");
            });

            test("Define an enumeration. Play with flags", function () {
                var State = $enumdef({
                    open: 0,
                    closed: 1
                });

                var openAndClosed = State.open.enum.or(State.closed);

                ok(openAndClosed.enum.hasFlag(State.open), "The flag must be correctly evaluated");
            });

            test("Define an enumeration. Parse a name into a value of the defined enumeration.", function () {
                var State = $enumdef({
                    none: 0,
                    open: 1,
                    closed: 2,
                    dead: 4
                });

                var result = $global.joopl.Enum.parseName(State, "closed");

                ok(result == State.closed, "Parsed value is one of the defined enumeration");

                result = $global.joopl.Enum.parseNames(State, "open,closed");

                ok(result.hasFlag(State.open) && result.hasFlag(State.closed));
            });
        })(undefined);
    </script>
</body>
</html>
